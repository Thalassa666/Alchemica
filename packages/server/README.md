# 1.1. Доступные маршруты

| Тип      | Маршрут  | Описание                                           |
| -------- | -------- | -------------------------------------------------- |
| **GET**  | /topics  | Получить список топиков и всех вложенных элементов |
| **POST** | /topic   | Создать топик                                      |
| **POST** | /comment | Добавить комментарий к топику                      |
| **POST** | /reply   | Добавить ответ на комментарий                      |

# 1.2. Общая информация

## 1.2.1. Cookie

В обязательном порядке нужно прокидывать Cookie после авторизации. Для этого в fetch запросе нужно добавлять:

```
{credentials: "include"}
```

В случае, если не отправлять будет возвращаться ошибка о том, что пользователь не авторизован

## 1.2.2. Обработка ошибок

В случае возникновения ошибки, обратно будет возвращаться объект с описанием ошибки. Например:

```
{message: "Пользователь не авторизован"}
```

## 1.2.3. Отправка пользователя

Т.к. БД пользователей хранится отдельно, то для каждого POST запроса необходимо отправлять текущего пользователя, который хранится в `state.authReducer.userData` (формата `IUser`)
| Поле | Тип данных |
| ----------------------- | ------------------------------------------------------- |
| **user** | Составное поле из IUser, в т.ч.: |
| { | |
| id | number |
| firstName | string OR null |
| secondName | string OR null |
| login | string |
| avatar | string OR null |
| } | |

Далее будет просто указываться user с типом данных IUser, подразумевая структуру выше

# 2.1. GET /topics

**Возвращает при успехе**

```
{
  count: 2,
  rows: [
    {
      id: 1,
      userId: 100500,
      title: 'Topic example',
      createdAt: '2024-10-18T18:20:51.835Z',
      updatedAt: '2024-10-18T18:20:51.835Z',
      comments: [
        {
          id: 1,
          userId: 100500,
          topicId: 1,
          content: 'My first topic comment',
          createdAt: '2024-10-18T18:22:48.767Z',
          updatedAt: '2024-10-18T18:22:48.767Z',
          replies: [
            {
              id: 1,
              userId: 100500,
              commentId: 1,
              content: 'My first reply on comment',
              createdAt: '2024-10-18T18:23:11.763Z',
              updatedAt: '2024-10-18T18:23:11.763Z',
              user: {
                id: 100500,
                firstName: "FOO",
                secondName: "BAR",
                login: "BAZ",
                avatar:
                  '/foobarbaz.jpg',
                createdAt: '2024-10-18T18:20:27.543Z',
                updatedAt: '2024-10-18T18:20:27.543Z',
              },
            },
       ],
          user: {...},
        },
      ],
      user: {...},
    },
  ],
}
```

# 2.2. POST /topic

**Принимает:**
| Поле | Тип данных |
| ---------- | ---------- |
| **title** | string |
| **user** | Составное поле из IUser |

**Возвращает при успехе:**
Экземпляр созданного Topic (см. отдельный элемент листа topics из п.2.1.), но без вложенных комментариев, т.к. они ещё пустые

# 2.3. POST /comment

**Принимает:**
| Поле | Тип данных |
| ---------- | ---------- |
| **content** | string |
| **topicId** | number |
| **user** | Составное поле из IUser |

**Возвращает при успехе:**
Экземпляр созданного Comment (см. отдельный элемент листа comments из п.2.1.), но без вложенных реплаев, т.к. они ещё пустые

# 2.4. POST /reply

**Принимает:**
| Поле | Тип данных |
| ---------- | ---------- |
| **content** | string |
| **commentId** | number |
| **user** | Составное поле из IUser |

**Возвращает при успехе:**
Экземпляр созданного Reply (см. отдельный элемент листа replies из п.2.1.)
